<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>FrontlineQSR | Upload Data</title>

  <link rel="stylesheet" href="./assets/styles.css" />

  <!-- AUTH (must be correct path: /assets/auth.js) -->
  <script defer src="./assets/auth.js"></script>

  <!-- UPLOAD LOGIC -->
  <script defer src="./assets/upload.js"></script>

  <style>
    /* If styles.css exists and handles theme, great.
       This just guarantees the layout looks like the dashboard. */
    body { background:#0b0f14; color:#e9eef5; margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial; }
    .wrap { max-width: 1100px; margin: 0 auto; padding: 18px; }
    .topbar { display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom: 12px; }
    .title { font-size: 28px; font-weight: 900; letter-spacing: .2px; }
    .subtitle { color:#b7c3d4; font-size: 13px; margin-top: 2px; }
    .btn { cursor:pointer; border:1px solid rgba(255,255,255,.14); background: rgba(255,255,255,.08); color:#e9eef5; padding:10px 12px; border-radius: 12px; font-weight:700; }
    .btn.primary { background: linear-gradient(135deg, rgba(16,185,129,.25), rgba(34,197,94,.12)); border-color: rgba(16,185,129,.35); }
    .btn:disabled { opacity:.55; cursor:not-allowed; }
    .card { background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12); border-radius: 16px; padding: 16px; margin: 12px 0; }
    .grid2 { display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
    @media (max-width: 900px){ .grid2{ grid-template-columns:1fr; } }
    label { display:block; font-size:12px; color:#b7c3d4; margin-bottom:6px; }
    input[type="month"], input[type="date"], input[type="text"] { width:100%; padding:10px; border-radius: 12px; border:1px solid rgba(255,255,255,.14); background: rgba(0,0,0,.20); color:#e9eef5; }
    input[type="file"] { width:100%; }
    .muted { color:#b7c3d4; font-size: 12px; }
    .status { margin-top: 10px; padding: 10px 12px; border-radius: 12px; border:1px solid rgba(255,255,255,.12); background: rgba(0,0,0,.18); min-height: 38px; }
    .err { color:#ff7b7b; font-weight:800; }
    .ok { color:#9ff3c6; font-weight:800; }
    .small { font-size: 12px; color:#b7c3d4; }
    .divider { height:1px; background: rgba(255,255,255,.10); margin: 12px 0; }
    .hintbox { background: rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.10); border-radius: 14px; padding: 12px; }
    .hintbox ul { margin: 8px 0 0 18px; padding: 0; }
  </style>
</head>

<body>
  <div class="wrap">

    <div class="topbar">
      <div>
        <div class="title">Upload Data</div>
        <div class="subtitle">Upload <b>3 months (required)</b> + <b>3 weeks (optional)</b>. We’ll keep it simple: upload raw KPI CSVs first, tune later.</div>
      </div>
      <div style="display:flex; gap:10px; align-items:center;">
        <button class="btn" id="btnGoReports" type="button">Reports</button>
        <button class="btn" id="btnLogout" type="button">Logout</button>
      </div>
    </div>

    <!-- NOTE: Client/Store selection removed on purpose -->
    <div class="card">
      <div style="display:flex; align-items:center; justify-content:space-between; gap:12px;">
        <div>
          <div style="font-weight:900;">Upload Scope</div>
          <div class="muted">Client/Store selection is temporarily disabled. This upload saves a “pending submission” for admin review.</div>
        </div>
        <div class="hintbox">
          <div style="font-weight:800;">Required monthly columns</div>
          <div class="small">date, location, sales, labor, transactions</div>
        </div>
      </div>
    </div>

    <div class="card">
      <div style="font-weight:900; font-size:18px; margin-bottom:6px;">Monthly Data (Required)</div>
      <div class="muted" style="margin-bottom:10px;">Pick the month + attach a CSV for each. Month fields help label the uploads (CSV content is what we parse).</div>

      <div class="grid2">
        <div class="card" style="margin:0;">
          <div style="font-weight:900;">Month 1</div>
          <div class="divider"></div>
          <label for="m1_month">Month</label>
          <input id="m1_month" type="month" />
          <div style="height:10px;"></div>
          <label for="m1_file">CSV</label>
          <input id="m1_file" type="file" accept=".csv,text/csv" />
        </div>

        <div class="card" style="margin:0;">
          <div style="font-weight:900;">Month 2</div>
          <div class="divider"></div>
          <label for="m2_month">Month</label>
          <input id="m2_month" type="month" />
          <div style="height:10px;"></div>
          <label for="m2_file">CSV</label>
          <input id="m2_file" type="file" accept=".csv,text/csv" />
        </div>

        <div class="card" style="margin:0;">
          <div style="font-weight:900;">Month 3</div>
          <div class="divider"></div>
          <label for="m3_month">Month</label>
          <input id="m3_month" type="month" />
          <div style="height:10px;"></div>
          <label for="m3_file">CSV</label>
          <input id="m3_file" type="file" accept=".csv,text/csv" />
        </div>

        <div class="hintbox">
          <div style="font-weight:900;">Monthly Tips</div>
          <ul class="small">
            <li>One file per month.</li>
            <li>CSV header row must include: <b>date, location, sales, labor, transactions</b>.</li>
            <li>Extra columns are fine.</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="card">
      <div style="font-weight:900; font-size:18px; margin-bottom:6px;">Weekly Data (Optional)</div>
      <div class="muted" style="margin-bottom:10px;">Used for progress within the current month (up to 3 weeks). Week start should be Monday ideally.</div>

      <div class="grid2">
        <div class="card" style="margin:0;">
          <div style="font-weight:900;">Week 1</div>
          <div class="divider"></div>
          <label for="w1_start">Week Start (YYYY-MM-DD)</label>
          <input id="w1_start" type="date" />
          <div style="height:10px;"></div>
          <label for="w1_file">CSV</label>
          <input id="w1_file" type="file" accept=".csv,text/csv" />
        </div>

        <div class="card" style="margin:0;">
          <div style="font-weight:900;">Week 2</div>
          <div class="divider"></div>
          <label for="w2_start">Week Start (YYYY-MM-DD)</label>
          <input id="w2_start" type="date" />
          <div style="height:10px;"></div>
          <label for="w2_file">CSV</label>
          <input id="w2_file" type="file" accept=".csv,text/csv" />
        </div>

        <div class="card" style="margin:0;">
          <div style="font-weight:900;">Week 3</div>
          <div class="divider"></div>
          <label for="w3_start">Week Start (YYYY-MM-DD)</label>
          <input id="w3_start" type="date" />
          <div style="height:10px;"></div>
          <label for="w3_file">CSV</label>
          <input id="w3_file" type="file" accept=".csv,text/csv" />
        </div>

        <div class="hintbox">
          <div style="font-weight:900;">Weekly Tips</div>
          <ul class="small">
            <li>Weekly CSV can be “lite” KPIs. Extra columns are fine.</li>
            <li>If you don’t have weekly data, skip it.</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="card">
      <div style="font-weight:900; font-size:18px;">Submit</div>
      <div class="muted" style="margin: 6px 0 12px;">Validate files then submit for admin approval.</div>

      <div style="display:flex; gap:10px; flex-wrap:wrap;">
        <button class="btn primary" id="btnSubmit" type="button">Validate &amp; Submit</button>
        <button class="btn" id="btnReset" type="button">Reset</button>
      </div>

      <div class="status" id="statusBox">
        Ready.
      </div>

      <div class="small" style="margin-top:8px;">
        After submit: Admin approves in <b>admin.html</b>. Once approved, KPIs/Reports/Action Plan will pull the approved snapshot.
      </div>
    </div>

  </div>
</body>
</html>
